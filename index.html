<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Mass & Balance Dornier 228</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#0d0d0d">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icone.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <!-- CSS separado -->
  <link rel="stylesheet" href="design.css">

  <!-- Atualização automática -->
  <script src="auto-update.js" defer></script>

  <!-- Versão da App -->
  <script src="app-version.js" defer></script>

  <!-- Lógica principal -->
  <script src="main.js" defer></script>

  <script>
    // Registo do Service Worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(() => console.log("✅ Service Worker registado"))
        .catch(err => console.error("❌ Erro no SW:", err));
    }
  </script>
</head>

<body>

  <!-- Link para definições -->
  <div class="settings-link">
    <a href="settings.html">⚙️ Settings</a>
  </div>

  <!-- Secção: Cálculo de Payload -->
  <h2>Cálculo do Payload</h2>
  <table>
    <tr><th>Tipo</th><th>Nº Passageiros</th><th>Peso total (kg)</th></tr>
    <tr><td id="labelHomens">Homens</td><td><input type="text" inputmode="numeric" pattern="[0-9]*" id="men" value="0" oninput="calculate()" onchange="calculate()"></td><td id="menWeight">0</td></tr>
    <tr><td id="labelMulheres">Mulheres</td><td><input type="text" inputmode="numeric" pattern="[0-9]*" id="women" value="0" oninput="calculate()" onchange="calculate()"></td><td id="womenWeight">0</td></tr>
    <tr><td id="labelCriancas">Crianças</td><td><input type="text" inputmode="numeric" pattern="[0-9]*" id="children" value="0" oninput="calculate()" onchange="calculate()"></td><td id="childrenWeight">0</td></tr>
    <tr><td id="labelBagagem">Bagagem extra</td><td colspan="2"><input type="text" inputmode="numeric" pattern="[0-9]*" id="extraBag" value="0" oninput="calculate()" onchange="calculate()"></td></tr>
    <tr><td><strong>Payload total (kg)</strong></td><td colspan="2" id="totalPayload">0</td></tr>
  </table>

  <!-- Secção: Conversor de unidades -->
  <h2>Conversor Kg &harr; Lb</h2>
  <table>
    <tr><td>Kg para lb</td><td><input type="text" inputmode="numeric" pattern="[0-9]*" id="kg" value="0" oninput="convertKgToLb()" onchange="convertKgToLb()"></td><td id="toLb">0</td></tr>
    <tr><td>Lb para kg</td><td><input type="text" inputmode="numeric" pattern="[0-9]*" id="lb" value="0" oninput="convertLbToKg()" onchange="convertLbToKg()"></td><td id="toKg">0</td></tr>
  </table>

  <!-- Secção: Mass & Balance -->
  <h2>
  Mass & Balance
  <select id="aviaoSelecionado" onchange="calculate()" style="font-size: 14px; margin-left: 10px;"></select>
  </h2>
  <table>
    <tr><th>Item</th><th>Peso (kg)</th><th>Momento (kg·m)</th><th>Comentário</th></tr>
    <tr><td>Basic weight</td><td id="basicWeight">0</td><td id="basicMoment">0</td><td></td></tr>
    <tr><td>Pilotos</td><td><input type="text" inputmode="numeric" pattern="[0-9]*" id="pilots" value="150" oninput="calculate()" onchange="calculate()"></td><td id="momentPilots">0</td><td>ARM fixo = 4.21</td></tr>
    <tr><td>Payload</td><td><input type="text" inputmode="numeric" pattern="[0-9]*" id="manualPayload" value="0" oninput="calculate()" onchange="calculate()"></td><td id="momentPayload">0</td><td>ARM = 8.7 <span id="maxFuelNote" class="highlight"></span></td></tr>
    <tr class="gray-row"><td>ZFW</td><td id="zfw">0</td><td id="momentZfw">0</td><td></td></tr>
    <tr><td>Fuel loading</td><td><input type="text" inputmode="numeric" pattern="[0-9]*" id="fuel" value="0" oninput="calculate()" onchange="calculate()"></td><td id="momentFuel">0</td><td>ARM = 7.936 <span id="maxPayloadNote" class="highlight"></span></td></tr>
    <tr id="rampRow" class="gray-row"><td>Ramp Weight</td><td id="rampWeight" class="limit-check">0</td><td id="momentRamp">0</td><td></td></tr>
    <tr><td>Fuel taxi</td><td><input type="text" inputmode="numeric" pattern="[0-9]*" id="fuelTaxi" value="30" oninput="calculate()" onchange="calculate()"></td><td id="momentTaxi">0</td><td>ARM = 7.936</td></tr>
    <tr id="takeoffRow" class="gray-row"><td>Take-off Weight</td><td id="takeoffWeight" class="limit-check">0</td><td id="momentTakeoff">0</td><td>MAC: <span id="macTakeoff">0</span>%</td></tr>
    <tr><td>Fuel to destination</td><td><input type="text" inputmode="numeric" pattern="[0-9]*" id="fuelDest" value="0" oninput="calculate()" onchange="calculate()"></td><td id="momentDest">0</td><td>ARM = 7.936</td></tr>
    <tr id="landingRow" class="gray-row"><td>Landing Weight</td><td id="landingWeight">0</td><td id="momentLanding">0</td><td>MAC: <span id="macLanding">0</span>%</td></tr>
  </table>

</body>
</html>
